(function(a){a(function(){function B(b){coderockzMonth=a('.coderockz_woo_delivery_offdays_another_month_'+b).find('select').val(),coderockzMonth!=''&&a('.coderockz_woo_delivery_offdays_another_month_'+b+' .coderockz_woo_delivery_offdays_add_another_month').children('input').removeAttr('disabled'),a("select[name='coderockz_woo_delivery_offdays_month_"+b+"[]']").on('change',function(c){c.preventDefault(),a(this).removeAttr('name').attr('name','coderockz_woo_delivery_offdays_month_'+b+'[]'),a(this).siblings('input').removeAttr('name').attr('name','coderockz_woo_delivery_offdays_dates_'+a(this).val()+'_'+b).removeAttr('disabled');});}function n(){a('#coderockz_woo_delivery_meta_box_time_field option').each(function(){var b=a(this).attr('disabled');typeof b!==typeof undefined&&b!==!1&&(a(this).show(),a(this).attr('disabled',!1));var c=a(this).text();var d=c.indexOf(z);d!==-1&&a(this).text(c.substr(0,d));});}function o(c,d,b){c==d&&a('#coderockz_woo_delivery_meta_box_time_field option').each(function(){if(a(this).val()!=''){var c=a(this).val().split(' - ');_times_one=c[0].split(':'),_times_two=c[1].split(':'),c=_times_one[0]*60+parseInt(_times_one[1])+' - '+(_times_two[0]*60+parseInt(_times_two[1])),c=c.split(' - '),c[0]<=b&&c[1]<=b&&a(this).attr('disabled',!0);}});}function p(d,e){var b={};if(d.length>0){for(var c=0;d.length>c;c++)b[d[c]]=(b[d[c]]||0)+1;for(var f in b){if(!b.hasOwnProperty(f))continue;typeof e!==typeof undefined&&e!==!1&&b[f]>=e&&e!=0&&a('#coderockz_woo_delivery_meta_box_time_field option').each(function(){a(this).val()==f&&(a(this).attr('disabled',!0),a(this).text(a(this).text()+z));});}}}function q(c,d,e,b){c==d&&e&&a('#coderockz_woo_delivery_meta_box_time_field option').each(function(){if(a(this).val()!=''){var c=a(this).val().split(' - ');_times_one=c[0].split(':'),_times_two=c[1].split(':'),c=_times_one[0]*60+parseInt(_times_one[1])+' - '+(_times_two[0]*60+parseInt(_times_two[1])),c=c.split(' - '),c[0]<=b&&c[1]>b&&a(this).attr('disabled',!0);}});}function r(b){(typeof a('#coderockz_woo_delivery_meta_box_datepicker').val()==typeof undefined&&a('#coderockz_woo_delivery_meta_box_datepicker').val()==0||a('#coderockz_woo_delivery_meta_box_datepicker').val()=='')&&a('#coderockz_woo_delivery_meta_box_time_field option').each(function(){if(a(this).val()!=''){var c=a(this).val().split(' - ');_times_one=c[0].split(':'),_times_two=c[1].split(':'),c=_times_one[0]*60+parseInt(_times_one[1])+' - '+(_times_two[0]*60+parseInt(_times_two[1])),c=c.split(' - '),c[0]<=b&&c[1]<=b&&a(this).attr('disabled',!0);}});}function s(){a('#coderockz_woo_delivery_meta_box_pickup_field option').each(function(){var b=a(this).attr('disabled');typeof b!==typeof undefined&&b!==!1&&(a(this).show(),a(this).attr('disabled',!1));var c=a(this).text();var d=c.indexOf(A);d!==-1&&a(this).text(c.substr(0,d));});}function t(c,d,b){c==d&&a('#coderockz_woo_delivery_meta_box_pickup_field option').each(function(){if(a(this).val()!=''){var c=a(this).val().split(' - ');_pickupTimes_one=c[0].split(':'),_pickupTimes_two=c[1].split(':'),c=_pickupTimes_one[0]*60+parseInt(_pickupTimes_one[1])+' - '+(_pickupTimes_two[0]*60+parseInt(_pickupTimes_two[1])),c=c.split(' - '),c[0]<=b&&c[1]<=b&&a(this).attr('disabled',!0);}});}function u(d,e){var b={};if(d.length>0){for(var c=0;d.length>c;c++)b[d[c]]=(b[d[c]]||0)+1;for(var f in b){if(!b.hasOwnProperty(f))continue;typeof e!==typeof undefined&&e!==!1&&b[f]>=e&&e!=0&&a('#coderockz_woo_delivery_meta_box_pickup_field option').each(function(){a(this).val()==f&&(a(this).attr('disabled',!0),a(this).text(a(this).text()+A));});}}}function v(c,d,e,b){c==d&&e&&a('#coderockz_woo_delivery_meta_box_pickup_field option').each(function(){if(a(this).val()!=''){var c=a(this).val().split(' - ');_times_one=c[0].split(':'),_times_two=c[1].split(':'),c=_times_one[0]*60+parseInt(_times_one[1])+' - '+(_times_two[0]*60+parseInt(_times_two[1])),c=c.split(' - '),c[0]<=b&&c[1]>b&&a(this).attr('disabled',!0);}});}function w(b){(typeof a('#coderockz_woo_delivery_meta_box_pickup_datepicker').val()==typeof undefined&&a('#coderockz_woo_delivery_meta_box_pickup_datepicker').val()==0||a('#coderockz_woo_delivery_meta_box_pickup_datepicker').val()=='')&&a('#coderockz_woo_delivery_meta_box_pickup_field option').each(function(){if(a(this).val()!=''){var c=a(this).val().split(' - ');_pickupTimes_one=c[0].split(':'),_pickupTimes_two=c[1].split(':'),c=_pickupTimes_one[0]*60+parseInt(_pickupTimes_one[1])+' - '+(_pickupTimes_two[0]*60+parseInt(_pickupTimes_two[1])),c=c.split(' - '),c[0]<=b&&c[1]<=b&&a(this).attr('disabled',!0);}});}function x(){var s=[];var t=a('#coderockz_woo_delivery_meta_box_datepicker').data('selectable_dates');var c=new Date();var e='0'+(c.getMonth()+1);var f='0'+c.getDate();var b=c.getFullYear()+'-'+e.substr(-2)+'-'+f.substr(-2);all_disable_week_days=d;for(var i=0;i<t;i++){var c=new Date();var u=c.setDate(c.getDate()+i);var h=new Date(u);var e='0'+(Number(h.getMonth())+1);var v='0'+h.getDate();var f=h.getDay().toString();var k=h.getFullYear()+'-'+e.substr(-2)+'-'+v.substr(-2);a.inArray(k,g)===-1&&a.inArray(k,j)===-1&&a.inArray(f,all_disable_week_days)===-1?s.push(k):t+=1;}var l=a('#coderockz_woo_delivery_meta_box_order_id').val();var m=a('#coderockz_woo_delivery_meta_box_delivery_selection_field option:selected').val();a('#coderockz_woo_delivery_meta_box_datepicker').length?a('#coderockz_woo_delivery_meta_box_datepicker').flatpickr({enable:s,dateFormat:C,locale:{firstDayOfWeek:D},onChange:function(g,h,i){a('.coderockz-woo-delivery-loading-image').fadeIn();var c=new Date(g);var e='0'+(c.getMonth()+1);var f='0'+c.getDate();var d=c.getFullYear()+'-'+e.substr(-2)+'-'+f.substr(-2);a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_meta_box_get_orders',date:d,orderId:l,deliveryType:m},success:function(g){data=JSON.parse(g.data);var c=data.current_time;var e=data.delivery_times;var f=data.max_order_per_slot;n(),o(d,b,c),p(e,f),q(d,b,data.disabled_current_time_slot,c),r(c),a('.coderockz-woo-delivery-loading-image').fadeOut();}});},onReady:function(h,i,e){a('.coderockz-woo-delivery-loading-image').fadeIn();var d=new Date(e.selectedDates[0]);var f='0'+(d.getMonth()+1);var g='0'+d.getDate();if(e.selectedDates.length>0)var c=d.getFullYear()+'-'+f.substr(-2)+'-'+g.substr(-2);else var c=b;a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_meta_box_get_orders',date:c,orderId:l,deliveryType:m},success:function(g){data=JSON.parse(g.data);var d=data.current_time;var e=data.delivery_times;var f=data.max_order_per_slot;n(),o(c,b,d),p(e,f),q(c,b,data.disabled_current_time_slot,d),r(d),a('.coderockz-woo-delivery-loading-image').fadeOut();}});}}):a('#coderockz_woo_delivery_meta_box_time_field').length?(a('.coderockz-woo-delivery-loading-image').fadeIn(),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_meta_box_get_orders',onlyDeliveryTime:!0,date:b,orderId:l,deliveryType:m},success:function(f){data=JSON.parse(f.data);var c=data.current_time;if(Object.keys(data).length){var d=data.delivery_times;var e=data.max_order_per_slot;}else{var d=[];var e=[];}n(),o(b,b,c),p(d,e),q(b,b,data.disabled_current_time_slot,c),r(c),a('.coderockz-woo-delivery-loading-image').fadeOut();}})):a('.coderockz-woo-delivery-loading-image').fadeOut();}function y(){var m=[];var n=a('#coderockz_woo_delivery_meta_box_pickup_datepicker').data('pickup_selectable_dates');var c=new Date();var d='0'+(c.getMonth()+1);var f='0'+c.getDate();var b=c.getFullYear()+'-'+d.substr(-2)+'-'+f.substr(-2);all_pickup_disable_week_days=e;for(var i=0;i<n;i++){var c=new Date();var o=c.setDate(c.getDate()+i);var g=new Date(o);var d='0'+(Number(g.getMonth())+1);var p='0'+g.getDate();var f=g.getDay().toString();var j=g.getFullYear()+'-'+d.substr(-2)+'-'+p.substr(-2);a.inArray(j,h)===-1&&a.inArray(j,k)===-1&&a.inArray(f,all_pickup_disable_week_days)===-1?m.push(j):n+=1;}var l=a('#coderockz_woo_delivery_meta_box_order_id').val();pickupDate=a('#coderockz_woo_delivery_meta_box_pickup_datepicker').val(),a('#coderockz_woo_delivery_meta_box_pickup_datepicker').length?a('#coderockz_woo_delivery_meta_box_pickup_datepicker').flatpickr({enable:m,dateFormat:E,locale:{firstDayOfWeek:F},onChange:function(g,h,i){a('.coderockz-woo-delivery-loading-image').fadeIn(),a('#coderockz_woo_delivery_meta_box_pickup_field').val('');var c=new Date(g);var e='0'+(c.getMonth()+1);var f='0'+c.getDate();var d=c.getFullYear()+'-'+e.substr(-2)+'-'+f.substr(-2);a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_meta_box_get_orders_pickup',date:d,orderId:l},success:function(g){data=JSON.parse(g.data);var c=data.current_time;formatedPickupDateSelected=data.formated_pickup_date_selected;var e=data.pickup_delivery_times;var f=data.pickup_max_order_per_slot;s(),t(d,b,c),u(e,f),v(d,b,data.pickup_disabled_current_time_slot,c),w(c),a('.coderockz-woo-delivery-loading-image').fadeOut();}});},onReady:function(h,i,e){a('.coderockz-woo-delivery-loading-image').fadeIn();var d=new Date(e.selectedDates[0]);var f='0'+(d.getMonth()+1);var g='0'+d.getDate();if(e.selectedDates.length>0)var c=d.getFullYear()+'-'+f.substr(-2)+'-'+g.substr(-2);else var c=b;a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_meta_box_get_orders_pickup',date:c,orderId:l},success:function(g){data=JSON.parse(g.data);var d=data.current_time;formatedPickupDateSelected=data.formated_pickup_date_selected;var e=data.pickup_delivery_times;var f=data.pickup_max_order_per_slot;s(),t(c,b,d),u(e,f),v(c,b,data.pickup_disabled_current_time_slot,d),w(d),a('.coderockz-woo-delivery-loading-image').fadeOut();}});}}):a('#coderockz_woo_delivery_meta_box_pickup_field').length?(a('.coderockz-woo-delivery-loading-image').fadeIn(),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_meta_box_get_orders_pickup',onlyPickupTime:!0,date:b,orderId:l},success:function(f){data=JSON.parse(f.data);var c=data.current_time;if(Object.keys(data).length){var d=data.pickup_delivery_times;var e=data.pickup_max_order_per_slot;}else{var d=[];var e=[];}s(),t(b,b,c),u(d,e),v(b,b,data.pickup_disabled_current_time_slot,c),w(c),a('.coderockz-woo-delivery-loading-image').fadeOut();}})):a('.coderockz-woo-delivery-loading-image').fadeOut();}a("select[name='coderockz_delivery_time_timezone']").select2({dropdownCssClass:'coderockz_delivery_time_timezone_dropdown'}),'wooDeliveryFreeDateTimeActiveIndex'in localStorage?(a('.coderockz-woo-delivery-free-vertical-tabs .coderockz-woo-delivery-free-tabs').find('> button:eq('+localStorage.getItem('wooDeliveryFreeDateTimeActiveIndex')+')').addClass('coderockz-woo-delivery-active'),a('.coderockz-woo-delivery-free-vertical-tabs .coderockz-woo-delivery-maincontent').find('> .coderockz-woo-delivery-tabcontent:eq('+localStorage.getItem('wooDeliveryFreeDateTimeActiveIndex')+')').addClass('coderockz-woo-delivery-active')):(a('.coderockz-woo-delivery-free-vertical-tabs .coderockz-woo-delivery-free-tabs').find('> button:eq(0)').addClass('coderockz-woo-delivery-active'),a('.coderockz-woo-delivery-free-vertical-tabs .coderockz-woo-delivery-maincontent').find('> .coderockz-woo-delivery-tabcontent:eq(0)').addClass('coderockz-woo-delivery-active')),a(document).on('click','.coderockz-woo-delivery-free-vertical-tabs .coderockz-woo-delivery-free-tabs button',function(i){var c=a(this).index();localStorage.setItem('wooDeliveryFreeDateTimeActiveIndex',c);var b=a(this).data('tab');var d=this.getAttribute('data-tab');var e=a('.coderockz-woo-delivery-free-vertical-tabs .coderockz-woo-delivery-maincontent .coderockz-woo-delivery-tabcontent[data-tab="'+b+'"]');var f=document.querySelector('.coderockz-woo-delivery-free-vertical-tabs .coderockz-woo-delivery-maincontent .coderockz-woo-delivery-tabcontent[data-tab="'+d+'"]');var g=document.querySelector('.coderockz-woo-delivery-free-vertical-tabs .coderockz-woo-delivery-maincontent .coderockz-woo-delivery-tabcontent.coderockz-woo-delivery-active');a('.coderockz-woo-delivery-free-vertical-tabs .coderockz-woo-delivery-free-tabs button').removeClass('coderockz-woo-delivery-active'),a('.coderockz-woo-delivery-free-vertical-tabs .coderockz-woo-delivery-free-tabs button[data-tab="'+b+'"]').addClass('coderockz-woo-delivery-active');var h=anime({duration:400,targets:g,opacity:[1,0],translateX:[0,'100%'],easing:'easeInOutCubic',complete:function(){a('.coderockz-woo-delivery-free-vertical-tabs .coderockz-woo-delivery-maincontent .coderockz-woo-delivery-tabcontent').removeClass('coderockz-woo-delivery-active'),e.addClass('coderockz-woo-delivery-active');var b=anime({duration:400,targets:f,opacity:[0,1],translateX:['100%','0'],easing:'easeInOutCubic'});}});}),a(document).on('submit','#coderockz_delivery_timezone_form_submit',function(c){c.preventDefault();var b=a(this).serialize();a("input[name='coderockz_delivery_timezone_form_submit']").val('Updating ...'),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'post',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_process_delivery_timezone_form',dateFormData:b},success:function(b){b.success&&(a("input[name='coderockz_delivery_timezone_form_submit']").val('Save Changes'),a('.coderockz-woo-delivery-timezone-tab-notice').html("<span class='dashicons dashicons-yes'></span> Settings Changed Successfully").css('background','#249D60').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-timezone-tab-notice').hide('slide',{direction:'right'});},4000));}});}),a(document).on('click','.coderockz_woo_delivery_enable_dynamic_order_type',function(a){a.preventDefault(),alert('This feature only available on PRO version');}),a(document).on('submit','#coderockz_delivery_delivery_option_form_submit',function(c){c.preventDefault();var b=a(this).serialize();a("input[name='coderockz_delivery_delivery_option_form_submit']").val('Updating ...'),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'post',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_process_delivery_option_settings',formData:b},success:function(b){b.success&&(a("input[name='coderockz_delivery_delivery_option_form_submit']").val('Save Changes'),a('.coderockz-woo-delivery-delivery-option-notice').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-delivery-option-notice').hide('slide',{direction:'right'});},4000));}});}),a(document).on('submit','#coderockz_delivery_date_form_submit',function(c){c.preventDefault();var b=a(this).serialize();a("input[name='coderockz_delivery_date_form_submit']").val('Updating ...'),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'post',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_process_delivery_date_form',dateFormData:b},success:function(b){b.success&&(a("input[name='coderockz_delivery_date_form_submit']").val('Save Changes'),a('.coderockz-woo-delivery-date-tab-notice').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-date-tab-notice').hide('slide',{direction:'right'});},4000));}});}),a(document).on('submit','#coderockz_delivery_pickup_date_form_submit',function(c){c.preventDefault();var b=a(this).serialize();a("input[name='coderockz_delivery_pickup_date_form_submit']").val('Updating ...'),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'post',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_process_pickup_date_form',dateFormData:b},success:function(b){b.success&&(a("input[name='coderockz_delivery_pickup_date_form_submit']").val('Save Changes'),a('.coderockz-woo-delivery-pickup-date-tab-notice').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-pickup-date-tab-notice').hide('slide',{direction:'right'});},4000));}});}),a(document).on('submit','#coderockz_delivery_date_offdays_form_submit',function(c){c.preventDefault();var b=a(this).serialize();a("input[name='coderockz_delivery_date_offdays_form_submit']").val('Updating ...'),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'post',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_process_offdays_form',dateFormData:b},success:function(b){b.success&&(a("input[name='coderockz_delivery_date_offdays_form_submit']").val('Save Changes'),a('.coderockz-woo-delivery-date-tab-offdays-notice').html("<span class='dashicons dashicons-yes'></span> Settings Changed Successfully").css('background','#249D60').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-date-tab-offdays-notice').hide('slide',{direction:'right'});},4000));}});}),a(document).on('submit','#coderockz_delivery_time_form_submit',function(c){c.preventDefault();var b=a(this).serialize();a("input[name='coderockz_delivery_time_form_submit']").val('Updating ...'),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'post',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_process_delivery_time_form',dateFormData:b},success:function(b){b.success&&(a("input[name='coderockz_delivery_time_form_submit']").val('Save Changes'),a('.coderockz-woo-delivery-time-tab-notice').html("<span class='dashicons dashicons-yes'></span> Settings Changed Successfully").css('background','#249D60').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-time-tab-notice').hide('slide',{direction:'right'});},4000));}});}),a(document).on('submit','#coderockz_pickup_time_form_submit',function(i){i.preventDefault(),a('.coderockz_pickup_end_time_greater_notice').css('display','none');var b=a("input[name='coderockz_pickup_time_slot_starts_hour']").val();var e=a("input[name='coderockz_pickup_time_slot_starts_min']").val();var g=a("select[name='coderockz_pickup_time_slot_starts_format']").val();g=='am'?(b=b=='12'?'0':b,deliveryStart=Number(b)*60+Number(e)):(b=b=='12'?'0':b,deliveryStart=(Number(b)+12)*60+Number(e));var c=a("input[name='coderockz_pickup_time_slot_ends_hour']").val();var d=a("input[name='coderockz_pickup_time_slot_ends_min']").val();var f=a("select[name='coderockz_pickup_time_slot_ends_format']").val();if(f=='am'?(end12Hour=c=='12'?'0':c,deliveryEnd=Number(end12Hour)*60+Number(d)):(c=c=='12'?'0':c,deliveryEnd=(Number(c)+12)*60+Number(d)),f=='am'&&c=='12'&&(d=='0'||d=='00')&&(deliveryEnd=1440),deliveryEnd<=deliveryStart){a('.coderockz_pickup_end_time_greater_notice').css('display','inline-flex'),a("input[name='coderockz_pickup_time_form_submit']").val('Error!').removeClass('coderockz-woo-delivery-submit-btn').addClass('coderockz-woo-delivery-pickup-submit-btn-error'),setTimeout(function(){a("input[name='coderockz_pickup_time_form_submit']").val('Save Changes').removeClass('coderockz-woo-delivery-pickup-submit-btn-error').addClass('coderockz-woo-delivery-submit-btn');},4000);return;}var h=a(this).serialize();a("input[name='coderockz_pickup_time_form_submit']").val('Updating ...').removeClass('coderockz-woo-delivery-pickup-submit-btn-error').addClass('coderockz-woo-delivery-submit-btn'),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'post',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_process_pickup_time_form',dateFormData:h},success:function(b){b.success&&(a("input[name='coderockz_pickup_time_form_submit']").val('Save Changes'),a('.coderockz-woo-delivery-pickup-time-tab-notice').html("<span class='dashicons dashicons-yes'></span> Settings Changed Successfully").css('background','#249D60').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-pickup-time-tab-notice').hide('slide',{direction:'right'});},4000));}});});var b='';a(document).on('change keypress input','.coderockz_woo_delivery_offdays_year',function(c){if(c.which!=8&&c.which!=0&&(c.which<48||c.which>57))return a('.coderockz-woo-delivery-date-tab-offdays-notice').html('<span class="dashicons dashicons-no-alt"></span> No character allowed except number').css('background','#DD4F43').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-date-tab-offdays-notice').hide('slide',{direction:'right'});},4000),!1;if(a(this).val().length=='4'){var d=a(this).parents().siblings('.coderockz-woo-delivery-add-year-html').children('input').map(function(){return this.value;}).get();b=a(this).val(),jQuery.inArray(b,d)!='-1'?(a(this).val(''),a('.coderockz-woo-delivery-date-tab-offdays-notice').html('<span class="dashicons dashicons-no-alt"></span> You have already enter the Year').css('background','#DD4F43').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-date-tab-offdays-notice').hide('slide',{direction:'right'});},4000)):b<new Date().getFullYear()?(a(this).val(''),a('.coderockz-woo-delivery-date-tab-offdays-notice').html('<span class="dashicons dashicons-no-alt"></span> You have enter a outdated year').css('background','#DD4F43').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-date-tab-offdays-notice').hide('slide',{direction:'right'});},4000)):(a(this).attr('name','coderockz_woo_delivery_offdays_year_'+b),a(this).parent().children('.coderockz_woo_delivery_offdays_another_month').addClass('coderockz_woo_delivery_offdays_another_month_'+b),a(this).parent().children('.coderockz_woo_delivery_offdays_another_month_'+b).find('select').attr('name','coderockz_woo_delivery_offdays_month_'+b+'[]').removeAttr('disabled'),a(this).parent().children('span').find('.coderockz-woo-delivery-add-month-btn').removeAttr('disabled'),B(b));}else a(this).removeAttr('name'),selector=a(this).parent().children('.coderockz_woo_delivery_offdays_another_month_'+b),selector.find('.coderockz-woo-delivery-select-field').attr('disabled','disabled'),selector.find('.coderockz-woo-delivery-input-field').attr('disabled','disabled'),selector.find('.coderockz-woo-delivery-add-month-btn').attr('disabled','disabled'),selector.removeAttr('class').addClass('coderockz_woo_delivery_offdays_another_month');}),a(document).on('click','.coderockz-woo-delivery-dummy-btn',function(){var c=a(this).prev('.coderockz-woo-delivery-add-month-btn').attr('disabled');typeof c!==typeof undefined&&c!==!1?(a('.coderockz-woo-delivery-date-tab-offdays-notice').html('<span class="dashicons dashicons-no-alt"></span> Input the Year First').css('background','#DD4F43').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-date-tab-offdays-notice').hide('slide',{direction:'right'});},4000)):(b=a(this).parent().siblings('input').val(),a(this).parent().siblings('.coderockz_woo_delivery_offdays_another_month_'+b).children('.coderockz_woo_delivery_offdays_add_another_month').first().clone().appendTo('.coderockz_woo_delivery_offdays_another_month_'+b),a(this).parent().siblings('.coderockz_woo_delivery_offdays_another_month_'+b).children('.coderockz_woo_delivery_offdays_add_another_month').last().children('select').val(''),a(this).parent().siblings('.coderockz_woo_delivery_offdays_another_month_'+b).children('.coderockz_woo_delivery_offdays_add_another_month').last().children('input').val('').removeAttr('name'),a(this).parent().siblings('.coderockz_woo_delivery_offdays_another_month_'+b).children('.coderockz_woo_delivery_offdays_add_another_month').last().append("<button class='coderockz-offdays-month-remove'><span class='dashicons dashicons-trash'></span></button>"),B(b));}),a(document).on('click','.coderockz-offdays-month-remove',function(b){b.preventDefault(),a(this).parent().remove();}),addYearHTML=a('.coderockz-woo-delivery-add-year-html').first().clone(),a(document).on('click','.coderockz-woo-delivery-add-year-btn',function(b){b.preventDefault(),a('.coderockz-woo-delivery-offdays').append(addYearHTML.clone()),a('.coderockz-woo-delivery-add-year-html').last().prepend("<button class='coderockz-offdays-year-remove'><span class='dashicons dashicons-trash'></span></button>"),a('.coderockz-woo-delivery-add-year-html').last().children('.coderockz-arrow').remove(),a('.coderockz-woo-delivery-add-year-html').last().children('.coderockz_woo_delivery_offdays_year').removeAttr('name').val(''),length=a('.coderockz-woo-delivery-add-year-html').last().children('.coderockz_woo_delivery_offdays_another_month').children('.coderockz_woo_delivery_offdays_add_another_month').length,length>1&&a('.coderockz-woo-delivery-add-year-html').last().children('.coderockz_woo_delivery_offdays_another_month').children('.coderockz_woo_delivery_offdays_add_another_month:gt(0)').remove(),a('.coderockz-woo-delivery-add-year-html').last().children('.coderockz_woo_delivery_offdays_another_month').removeAttr('class').addClass('coderockz_woo_delivery_offdays_another_month'),a('.coderockz-woo-delivery-add-year-html').last().children('.coderockz_woo_delivery_offdays_another_month').children('.coderockz_woo_delivery_offdays_add_another_month').children('select').removeAttr('name').attr('disabled','disabled').val(''),a('.coderockz-woo-delivery-add-year-html').last().children('.coderockz_woo_delivery_offdays_another_month').children('.coderockz_woo_delivery_offdays_add_another_month').children('input').removeAttr('name').attr('disabled','disabled').val('');}),a(document).on('click','.coderockz-offdays-year-remove',function(b){b.preventDefault(),a(this).parent().remove();}),a(document).on('submit','#coderockz_delivery_localization_settings_form_submit',function(c){c.preventDefault();var b=a(this).serialize();a("input[name='coderockz_delivery_localization_settings_form_submit']").val('Updating ...'),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'post',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_process_localization_settings',formData:b},success:function(b){b.success&&(a("input[name='coderockz_delivery_localization_settings_form_submit']").val('Save Changes'),a('.coderockz-woo-delivery-localization-settings-notice').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-localization-settings-notice').hide('slide',{direction:'right'});},4000));}});}),a(document).on('submit','#coderockz_delivery_other_settings_form_submit',function(c){c.preventDefault();var b=a(this).serialize();a("input[name='coderockz_delivery_other_settings_form_submit']").val('Updating ...'),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'post',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_process_other_settings',dateFormData:b},success:function(b){b.success&&(a("input[name='coderockz_delivery_other_settings_form_submit']").val('Save Changes'),a('.coderockz-woo-delivery-other-settings-notice').show('slide',{direction:'right'}),setTimeout(function(){a('.coderockz-woo-delivery-other-settings-notice').hide('slide',{direction:'right'});},4000));}});}),a(document).on('click','.coderockz-woo-delivery-review-notice ul li a',function(c){c.preventDefault();let b=a(this).attr('val');b=='given'&&window.open('https://wordpress.org/support/plugin/woo-delivery/reviews/?rate=5#new-post','_blank'),a('.coderockz-woo-delivery-review-notice').slideUp(200,'linear'),a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'post',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_save_review_notice',notice:b},success:function(a){}});});var c=a('#coderockz_woo_delivery_deactive_plugin-modal');var i='';a(document).on('click','a.coderockz-woo-delivery-deactivate-link',function(b){b.preventDefault(),c.addClass('modal-active'),i=a(this).attr('href'),c.find('a.coderockz-woo-delivery-skip-deactivate').attr('href',i).css('float','right');}),c.on('click','.coderockz-woo-delivery-cancel-button',function(a){a.preventDefault(),c.removeClass('modal-active');}),c.on('click','input[type="radio"]',function(){var b=a(this).parents('li:first');c.find('.reason-input').remove();var d=b.data('type'),e=b.data('placeholder'),f='<div class="reason-input">'+('text'===d?'<input type="text" size="40" />':'<textarea rows="5" cols="45"></textarea>')+'</div>';d!==''&&(b.append(a(f)),b.find('input, textarea').attr('placeholder',e).focus());}),c.on('click','.coderockz-woo-delivery-deactivate-button',function(g){g.preventDefault();var b=a(this);if(b.hasClass('disabled'))return;var d=a('input[type="radio"]:checked',c);var f=d.parents('li:first'),e=f.find('textarea, input[type="text"]');a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz-woo-delivery-submit-deactivate-reason',reason_id:0===d.length?'none':d.val(),reason_info:0!==e.length?e.val().trim():''},beforeSend:function(){b.addClass('disabled'),b.text('Processing...');},complete:function(a){window.location.href=i;},error:function(a){}});}),a(document).on('click','.coderockz-woo-delivery-metabox-update-btn',function(i){i.preventDefault();var b=a(this).children('button').text();b=='Update'?a(this).children('button').text('Updating...'):a(this).children('button').text(b+'ing...');var c=a("input[name='coderockz_woo_delivery_meta_box_datepicker']").val();var d=a("input[name='coderockz_woo_delivery_meta_box_pickup_datepicker']").val();var e=a("select[name='coderockz_woo_delivery_meta_box_delivery_selection_field'] option:selected").val();var f=a("select[name='coderockz_woo_delivery_meta_box_time_field']").val();var g=a("select[name='coderockz_woo_delivery_meta_box_pickup_field']").val();var h=a('#coderockz_woo_delivery_meta_box_order_id').val();a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'post',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_save_meta_box_information',deliveryOption:e,date:c,pickupDate:d,time:f,pickupTime:g,orderId:h},success:function(a){location.reload();}});});var f='';f+='<div class="coderockz-woo-delivery-loading-image">',f+='<div class="coderockz-woo-delivery-loading-gif">',f+='<img src="'+a('.coderockz-woo-delivery-metabox-update-section').data('plugin-url')+'public/images/loading.gif" alt="" />',f+='</div>',f+='</div>',a('#coderockz_woo_delivery_meta_box').append(f);var C=a('#coderockz_woo_delivery_meta_box_datepicker').data('date_format');if(typeof a('#coderockz_woo_delivery_meta_box_datepicker').data('disable_week_days')!==typeof undefined&&a('#coderockz_woo_delivery_meta_box_datepicker').data('disable_week_days')!==!1){var d=a('#coderockz_woo_delivery_meta_box_datepicker').data('disable_week_days');d=d.toString(),d=d.split(',');}else var d=[];var D=a('#coderockz_woo_delivery_meta_box_datepicker').data('week_starts_from');if(typeof a('#coderockz_woo_delivery_meta_box_datepicker').data('disable_dates')!==typeof undefined&&a('#coderockz_woo_delivery_meta_box_datepicker').data('disable_dates')!==!1){var g=a('#coderockz_woo_delivery_meta_box_datepicker').data('disable_dates');g=g.toString(),g=g.split('::');}var E=a('#coderockz_woo_delivery_meta_box_pickup_datepicker').data('pickup_date_format');if(typeof a('#coderockz_woo_delivery_meta_box_pickup_datepicker').data('pickup_disable_week_days')!==typeof undefined&&a('#coderockz_woo_delivery_meta_box_pickup_datepicker').data('pickup_disable_week_days')!==!1){var e=a('#coderockz_woo_delivery_meta_box_pickup_datepicker').data('pickup_disable_week_days');e=e.toString(),e=e.split(',');}else var e=[];var F=a('#coderockz_woo_delivery_meta_box_pickup_datepicker').data('pickup_week_starts_from');if(typeof a('#coderockz_woo_delivery_meta_box_pickup_datepicker').data('pickup_disable_dates')!==typeof undefined&&a('#coderockz_woo_delivery_meta_box_pickup_datepicker').data('pickup_disable_dates')!==!1){var h=a('#coderockz_woo_delivery_meta_box_pickup_datepicker').data('pickup_disable_dates');h=h.toString(),h=h.split('::');}var z=a('#coderockz_woo_delivery_meta_box_time_field').data('order_limit_notice');var A=a('#coderockz_woo_delivery_meta_box_pickup_field').data('pickup_limit_notice');var j=[];var k=[];if(a('#coderockz_woo_delivery_meta_box_datepicker').length||a('#coderockz_woo_delivery_meta_box_pickup_datepicker').length){a('.coderockz-woo-delivery-loading-image').fadeIn();var l=a('#coderockz_woo_delivery_meta_box_delivery_selection_field option:selected').val();a.when(a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_admin_disable_max_delivery_pickup_date',deliverySelector:l},success:function(a){data=JSON.parse(a.data),j=data.disable_delivery_date_passed_time,k=data.disable_pickup_date_passed_time;}})).then(function(a){l=='delivery'?x():l=='pickup'&&y();});}else y(),x();if(a('#coderockz_woo_delivery_meta_box_delivery_selection_field option:selected').val()=='delivery'?(a('#coderockz_woo_delivery_meta_box_datepicker').hide(),a('#coderockz_woo_delivery_meta_box_time_field').hide(),a('#coderockz_woo_delivery_meta_box_pickup_datepicker').hide(),a('#coderockz_woo_delivery_meta_box_pickup_field').hide(),a('#coderockz_woo_delivery_meta_box_datepicker').show(),a('#coderockz_woo_delivery_meta_box_time_field').show()):a('#coderockz_woo_delivery_meta_box_delivery_selection_field option:selected').val()=='pickup'&&(a('#coderockz_woo_delivery_meta_box_pickup_datepicker').hide(),a('#coderockz_woo_delivery_meta_box_pickup_field').hide(),a('#coderockz_woo_delivery_meta_box_datepicker').hide(),a('#coderockz_woo_delivery_meta_box_time_field').hide(),a('#coderockz_woo_delivery_meta_box_pickup_datepicker').show(),a('#coderockz_woo_delivery_meta_box_pickup_field').show()),a(document).on('change','#coderockz_woo_delivery_meta_box_delivery_selection_field',function(c){c.preventDefault(),a('.coderockz-woo-delivery-loading-image').fadeIn();var b=a(this).val();a.when(a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_admin_disable_max_delivery_pickup_date',deliverySelector:b},success:function(a){data=JSON.parse(a.data),disableMaxDeliveryDate=data.disable_for_max_delivery_dates,disableMaxPickupDate=data.disable_for_max_pickup_dates,j=data.disable_delivery_date_passed_time,k=data.disable_pickup_date_passed_time;}})).then(function(c){b=='delivery'?(a('#coderockz_woo_delivery_meta_box_datepicker').hide(),a('#coderockz_woo_delivery_meta_box_time_field').hide(),a('#coderockz_woo_delivery_meta_box_pickup_datepicker').hide(),a('#coderockz_woo_delivery_meta_box_pickup_field').hide(),a('#coderockz_woo_delivery_meta_box_datepicker').show(),a('#coderockz_woo_delivery_meta_box_time_field').show(),x()):b=='pickup'&&(a('#coderockz_woo_delivery_meta_box_pickup_datepicker').hide(),a('#coderockz_woo_delivery_meta_box_pickup_field').hide(),a('#coderockz_woo_delivery_meta_box_datepicker').hide(),a('#coderockz_woo_delivery_meta_box_time_field').hide(),a('#coderockz_woo_delivery_meta_box_pickup_datepicker').show(),a('#coderockz_woo_delivery_meta_box_pickup_field').show(),y());});}),a('#coderockz_woo_delivery_code_editor_css').length){var m=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};m.codemirror=_.extend({},m.codemirror,{indentUnit:2,tabSize:2,mode:'css',lineNumbers:!1});var G=wp.codeEditor.initialize(a('#coderockz_woo_delivery_code_editor_css'),m);}});}(jQuery));